/* ──────────────────────────────────────────────────────────
   Xshiver – Responsive Video Page CSS  (≥1280  | 768-1279 | ≤767)
   UPDATED 2025-08-05: Fixed controls positioning & white buttons
   ────────────────────────────────────────────────────────── */

/* 0) Reset – keep it light */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
img,video{max-width:100%;display:block}
button{font:inherit;border:none;cursor:pointer;background:none}
ul{list-style:none}

/* Utility – hide elements when JS adds the class */
.hidden{display:none!important}

/* 1) Design tokens */
:root{
    --space-1:4px; --space-2:8px; --space-3:12px;
    --space-4:16px; --space-5:24px; --space-6:32px;
    --radius-1:4px; --radius-2:6px; --radius-3:10px;
    --clr-blue:#4a90e2;
    --clr-blue-10:rgba(74,144,226,.1);
    --clr-blue-20:rgba(74,144,226,.2);
    --clr-dark:#0e1117;
    --clr-dark-2:#161b22;
    --clr-black:#000;
    --clr-silver:#c9d1d9;
    --clr-gray:#8b949e;
    --clr-gold:#ffca3a;
    --clr-white:#ffffff;
    --shadow-xl:0 14px 32px rgba(0,0,0,.6);
    --tr-fast:.15s ease;
    --tr-mid:.25s ease;
}

/* 2) Header bar */
.video-header{
    position:fixed;top:0;left:0;right:0;height:56px;
    display:flex;align-items:center;
    padding:0 var(--space-4);
    background:rgba(0,0,0,.85);backdrop-filter:blur(10px);
    z-index:100
}
.video-actions{margin-left:auto;display:flex;gap:var(--space-2)}
.action-btn{padding:var(--space-1);border-radius:var(--radius-2);color:var(--clr-silver)}
.action-btn:hover{background:var(--clr-blue-20);color:var(--clr-blue)}

/* 3) Main layout */
.video-main{
    --sidebar-w:340px;
    display:grid;grid-template-columns:1fr var(--sidebar-w);
    gap:var(--space-5);max-width:1680px;
    padding:calc(var(--space-6)+56px) var(--space-5) var(--space-6);
    margin-inline:auto
}

/* 4) Player container */
.xshiver-player{
    position:relative;width:100%;aspect-ratio:16/9;
    background:var(--clr-black);border-radius:var(--radius-3);
    overflow:hidden;box-shadow:var(--shadow-xl)
}
.video-element{width:100%;height:100%;object-fit:cover}

/* 5) Loading overlay */
.video-loading{
    position:absolute;inset:0;display:flex;
    flex-direction:column;align-items:center;justify-content:center;
    background:rgba(0,0,0,.8);color:var(--clr-silver);
    transition:opacity var(--tr-mid);z-index:5
}
.video-loading.hidden{opacity:0;pointer-events:none}
.loading-spinner{
    width:40px;height:40px;border:4px solid rgba(255,255,255,.3);
    border-top-color:var(--clr-blue);border-radius:50%;
    animation:spin 1s ease-in-out infinite;margin-bottom:var(--space-3)
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ═══════════════════════════════════════════════════════════════════
   6) FIXED CONTROLS OVERLAY - Positioned at bottom for all devices
   ═══════════════════════════════════════════════════════════════════ */
.video-controls-overlay{
    position:absolute;
    left:0; bottom:0; right:0;
    pointer-events:none;           /* overlay itself ignores clicks */
    opacity:0;
    transition:opacity var(--tr-mid);
    background:linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 40%, rgba(0,0,0,0.4) 70%, transparent 100%);
    padding:var(--space-4);
    z-index:10;
    min-height:80px; /* Ensure minimum height for controls */
}

.xshiver-player:hover .video-controls-overlay,
.video-controls-overlay.show{opacity:1}

/* Allow clicks on interactive elements */
.video-controls-overlay .controls-bottom,
.video-controls-overlay .big-play-btn,
.video-controls-overlay .quality-selector{
    pointer-events:auto;
}

/* Big play button - centered */
.big-play-btn{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%, -50%);
    width:80px;height:80px;border-radius:50%;
    background:var(--clr-blue);color:var(--clr-white);
    display:flex;align-items:center;justify-content:center;
    z-index:15;transition:all var(--tr-mid);
    pointer-events:auto;
}
.big-play-btn:hover{scale:1.1;box-shadow:var(--shadow-xl)}
.big-play-btn.hidden{opacity:0;pointer-events:none}

/* Quality selector - positioned top-right */
.controls-top{
    position:absolute;
    top:var(--space-4);
    right:var(--space-4);
    display:flex;
    justify-content:flex-end;
    align-items:flex-start;
    pointer-events:auto;
}

/* Bottom controls bar - Fixed at bottom */
.controls-bottom{
    position:absolute;
    bottom:0;
    left:0;
    right:0;
    display:flex;
    flex-direction:column;
    gap:var(--space-2);
    padding:var(--space-3) var(--space-4);
    pointer-events:auto;
    background:linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 50%, rgba(0,0,0,0.4) 100%);
}

/* Progress bar */
.progress-container{width:100%;height:6px;cursor:pointer;position:relative;margin-bottom:var(--space-2)}
.progress-bar{width:100%;height:100%;background:rgba(255,255,255,.35);border-radius:3px;overflow:hidden}
.progress-filled{height:100%;background:var(--clr-blue);width:0;transition:width 0.1s ease}
.progress-buffer{position:absolute;top:0;left:0;height:100%;background:rgba(255,255,255,.55);width:0}
.progress-thumb{
    position:absolute;top:50%;translate:0 -50%;
    width:12px;height:12px;border-radius:50%;background:var(--clr-blue);
    opacity:0;transition:opacity var(--tr-fast);left:0;
}
.progress-container:hover .progress-thumb{opacity:1}

/* Control buttons row - All buttons white */
.controls-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:var(--space-4);
}
.controls-left,.controls-right{
    display:flex;
    align-items:center;
    gap:var(--space-3);
}
.control-btn{
    padding:var(--space-2);
    color:var(--clr-white) !important; /* Force white color */
    border-radius:var(--radius-1);
    transition:all var(--tr-fast);
    background:transparent;
    display:flex;
    align-items:center;
    justify-content:center;
    min-width:32px;
    min-height:32px;
}
.control-btn:hover{
    background:rgba(255,255,255,.25);
    color:var(--clr-white) !important; /* Keep white on hover */
    transform:scale(1.05);
}
.control-btn:active{
    transform:scale(0.95);
}

/* Volume controls - White buttons */
.volume-container{display:flex;align-items:center;gap:var(--space-2)}
.volume-btn{
    color:var(--clr-white) !important; /* Force white */
}
.volume-slider{
    width:90px;height:4px;cursor:pointer;
    opacity:0;transform:scaleX(0);transform-origin:left;
    transition:all var(--tr-fast);
}
.volume-container:hover .volume-slider{opacity:1;transform:scaleX(1)}
.volume-bar{width:100%;height:100%;background:rgba(255,255,255,.35);border-radius:2px;position:relative}
.volume-filled{height:100%;background:var(--clr-blue);width:80%;transition:width 0.1s ease}
.volume-thumb{
    position:absolute;top:50%;translate:0 -50%;
    width:8px;height:8px;border-radius:50%;background:var(--clr-blue);
    left:80%;
}

/* Time display - White text */
.time-display{
    font-family:'Courier New',Courier,monospace;
    font-size:.9rem;
    color:var(--clr-white) !important; /* Force white */
    white-space:nowrap;
    font-weight:500;
}

/* Play/Pause button - White */
.play-pause-btn{
    color:var(--clr-white) !important;
    font-size:1.2rem;
}

/* Skip buttons - White */
.skip-btn{
    color:var(--clr-white) !important;
    font-size:1.1rem;
}

/* Fullscreen button - White */
.fullscreen-btn{
    color:var(--clr-white) !important;
    font-size:1.1rem;
}

/* Speed button - White */
.speed-btn{
    color:var(--clr-white) !important;
    font-size:.9rem;
    font-weight:500;
}

/* ═══════════════════════════════════════════════════════════════════
   7) VIDEO INFO SECTION - Title now appears below player
   ═══════════════════════════════════════════════════════════════════ */
.video-info-section{
    margin-top:var(--space-5);
}

/* Main video title - now styled as page title */
.video-page-title{
    font-size:1.8rem;
    font-weight:700;
    color:var(--clr-silver);
    margin-bottom:var(--space-4);
    line-height:1.3;
}

.video-details{
    background:var(--clr-dark);border-radius:var(--radius-3);
    padding:var(--space-5);border:1px solid var(--clr-dark-2)
}
.video-meta{
    display:flex;justify-content:space-between;align-items:center;
    margin-bottom:var(--space-4);padding-bottom:var(--space-4);
    border-bottom:1px solid var(--clr-dark-2)
}
.video-stats{
    display:flex;gap:var(--space-3);
    color:var(--clr-gray);font-size:.95rem;
}
.video-rating{display:flex;align-items:center;gap:var(--space-2)}
.rating-stars{display:flex;align-items:center;gap:var(--space-1)}
.rating-stars .star{color:var(--clr-gold);font-size:1.2rem}
.rating-text{color:var(--clr-gray);font-size:.9rem;margin-left:var(--space-2)}

.video-description h2{color:var(--clr-blue);margin-bottom:var(--space-3)}
.video-description p{color:var(--clr-silver);line-height:1.6;margin-bottom:var(--space-4)}

/* Tags */
.video-tags{display:flex;flex-wrap:wrap;gap:var(--space-2)}
.video-tag{
    padding:var(--space-1)var(--space-2);font-size:.8rem;font-weight:500;
    background:var(--clr-blue-20);color:var(--clr-blue);
    border:1px solid var(--clr-blue);border-radius:var(--radius-3);
    text-decoration:none;transition:all var(--tr-fast);
}
.video-tag:hover{background:var(--clr-blue);color:#fff}

/* 8) Sidebar */
.related-videos-sidebar{
    background:var(--clr-dark);border-radius:var(--radius-3);
    padding:var(--space-4);border:1px solid var(--clr-dark-2);
    height:max-content;position:sticky;top:96px
}
.sidebar-title{color:var(--clr-blue);font-weight:700;margin-bottom:var(--space-4)}
.related-videos-list{display:flex;flex-direction:column;gap:var(--space-3)}
.related-video-card{
    display:flex;gap:var(--space-2);padding:var(--space-2);
    border-radius:var(--radius-2);cursor:pointer;
    transition:background var(--tr-fast);
}
.related-video-card:hover{background:var(--clr-blue-10)}

.related-thumbnail{
    position:relative;width:120px;aspect-ratio:16/9;flex-shrink:0;
    background:var(--clr-dark-2);border-radius:var(--radius-1);overflow:hidden
}
.placeholder-thumb{
    width:100%;height:100%;
    background:linear-gradient(45deg, var(--clr-dark-2) 25%, transparent 25%),
               linear-gradient(-45deg, var(--clr-dark-2) 25%, transparent 25%),
               linear-gradient(45deg, transparent 75%, var(--clr-dark-2) 75%),
               linear-gradient(-45deg, transparent 75%, var(--clr-dark-2) 75%);
    background-size:8px 8px;
    background-position:0 0, 0 4px, 4px -4px, -4px 0px;
}

.related-duration{
    position:absolute;bottom:4px;right:4px;
    background:rgba(0,0,0,.8);color:#fff;
    font-size:.7rem;padding:2px 4px;border-radius:2px;
    font-weight:600;
}
.related-info{flex:1;display:flex;flex-direction:column;gap:var(--space-1)}
.related-title{
    color:var(--clr-silver);font-size:.9rem;font-weight:500;line-height:1.3;
    overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical
}
.related-views{color:var(--clr-gray);font-size:.8rem}

/* 9) Theater & fullscreen modes */
.theater-mode .xshiver-player{
    position:fixed;inset:0;border-radius:0;
    aspect-ratio:auto;z-index:9999;
}
.xshiver-player:fullscreen,
.xshiver-player:-webkit-full-screen{
    width:100vw;height:100vh;border-radius:0;
}

/* 10) Share modal */
.share-options{display:flex;flex-wrap:wrap;gap:var(--space-4)}
.share-btn{
    display:flex;flex-direction:column;align-items:center;gap:var(--space-1);
    padding:var(--space-4);background:var(--clr-dark-2);border-radius:var(--radius-3);
    color:var(--clr-silver);transition:all var(--tr-fast);
}
.share-btn:hover{background:var(--clr-blue);color:#fff}
.share-icon{font-size:2rem}
.share-link input{
    width:100%;padding:var(--space-2);border-radius:var(--radius-2);
    background:var(--clr-dark-2);border:1px solid var(--clr-gray);color:var(--clr-silver)
}

/* Toast notifications */
.toast{
    position:fixed;bottom:20px;right:20px;
    background:var(--clr-dark);color:var(--clr-silver);
    padding:var(--space-3)var(--space-4);border-radius:var(--radius-2);
    transform:translateX(100%);transition:transform .3s ease;z-index:1001;
}
.toast.show{transform:translateX(0)}
.toast-success{border-left:4px solid #4caf50}
.toast-info{border-left:4px solid var(--clr-blue)}

/* ═══════════════════════════════════════════════════════════════════
   11) RESPONSIVE BREAKPOINTS
   ═══════════════════════════════════════════════════════════════════ */

/* Tablet ≤1279 */
@media(max-width:1279px){
    .video-main{
        grid-template-columns:1fr;gap:var(--space-5);
        padding:calc(var(--space-5)+56px) var(--space-4)
    }
    .related-videos-sidebar{position:static;margin-top:var(--space-5)}
    
    /* Ensure controls stay at bottom on tablets */
    .controls-bottom{
        position:absolute;
        bottom:0;
        padding:var(--space-3);
    }
}

/* Phone ≤767 */
@media(max-width:767px){
    .video-header{height:48px;padding:0 var(--space-2)}
    .big-play-btn{width:64px;height:64px}
    .video-page-title{font-size:1.4rem}
    
    /* Mobile controls positioning */
    .controls-bottom{
        position:absolute;
        bottom:0;
        left:0;
        right:0;
        padding:var(--space-2);
        gap:var(--space-1);
    }
    .controls-row{flex-wrap:wrap;gap:var(--space-2)}
    .time-display{font-size:.8rem;min-width:70px;color:var(--clr-white) !important}
    .volume-slider{width:70px}
    .video-info-section{margin-top:var(--space-4)}
    .video-details{padding:var(--space-4)}
    .video-description h2{font-size:1.1rem}
    .sidebar-title{font-size:1rem}
    .related-thumbnail{width:96px}
    .share-options{flex-direction:column}
    .controls-top{top:var(--space-2);right:var(--space-2)}
    
    /* Ensure all control buttons are white on mobile */
    .control-btn{
        color:var(--clr-white) !important;
        min-width:40px;
        min-height:40px;
    }
}

/* Touch devices - Controls always visible and white */
@media(hover:none) and (pointer:coarse){
    .video-controls-overlay{opacity:1}
    .progress-thumb,.volume-thumb{opacity:1;width:16px;height:16px}
    .control-btn{
        min-width:44px;
        min-height:44px;
        color:var(--clr-white) !important;
    }
    .big-play-btn{width:88px;height:88px}
    .volume-slider{opacity:1;transform:scaleX(1)}
    .time-display{color:var(--clr-white) !important}
    
    /* Ensure controls are fixed at bottom for touch devices */
    .controls-bottom{
        position:absolute;
        bottom:0;
        left:0;
        right:0;
    }
}
