/* ──────────────────────────────────────────────────────────
   Xshiver – Responsive Video Page CSS
   Targets:  ≥1280 px  |  768–1279 px  |  ≤767 px
   ────────────────────────────────────────────────────────── */

/* 0) CSS reset – keep it very light */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
img, video           { max-width: 100%; display: block; }
button               { font: inherit; border: none; cursor: pointer; background: none; }
ul                   { list-style: none; }

/* 1) Design tokens (re-use across the whole site) */
:root {
    /* spacing (4 px grid) */
    --space-1: 4px;  --space-2: 8px;  --space-3: 12px;
    --space-4: 16px; --space-5: 24px; --space-6: 32px;

    /* radii */
    --radius-1: 4px; --radius-2: 6px; --radius-3: 10px;

    /* colours */
    --clr-blue: #4a90e2;
    --clr-blue-10: rgba(74, 144, 226, 0.1);
    --clr-blue-20: rgba(74, 144, 226, 0.2);
    --clr-dark: #0e1117;
    --clr-dark-2: #161b22;
    --clr-black: #000;          /* pure black for video bg */
    --clr-silver: #c9d1d9;
    --clr-gray: #8b949e;
    --clr-gold: #ffca3a;

    /* effects */
    --shadow-xl: 0 14px 32px rgba(0, 0, 0, 0.6);
    --tr-fast: 0.15s ease;
    --tr-mid: 0.25s ease;
}

/* 2) Header bar */
.video-header {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 56px;
    display: flex; align-items: center;
    padding: 0 var(--space-4);
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    z-index: 100;
}
.video-actions {
    margin-left: auto;
    display: flex; gap: var(--space-2);
}
.action-btn {
    padding: var(--space-1);
    border-radius: var(--radius-2);
    color: var(--clr-silver);
}
.action-btn:hover { background: var(--clr-blue-20); color: var(--clr-blue); }

/* 3) Main layout */
.video-main {
    --sidebar-w: 340px;
    display: grid;
    grid-template-columns: 1fr var(--sidebar-w);
    gap: var(--space-5);
    max-width: 1680px;
    padding: calc(var(--space-6) + 56px) var(--space-5) var(--space-6); /* top includes header */
    margin-inline: auto;
}

/* 4) Player container */
.xshiver-player {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    background: var(--clr-black);
    border-radius: var(--radius-3);
    overflow: hidden;
    box-shadow: var(--shadow-xl);
}

/* video element */
.video-element { width: 100%; height: 100%; object-fit: cover; }

/* 5) Loading overlay */
.video-loading {
    position: absolute; inset: 0;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    background: rgba(0, 0, 0, 0.8); color: var(--clr-silver);
    transition: opacity var(--tr-mid);
    z-index: 5;
}
.video-loading.hidden { opacity: 0; pointer-events: none; }

/* 6) Controls overlay (clickable) */
.video-controls-overlay {
    position: absolute; inset: 0;
    opacity: 0;
    transition: opacity var(--tr-mid);
    pointer-events: auto;          /* allow buttons to work */
}
.xshiver-player:hover .video-controls-overlay,
.video-controls-overlay.show { opacity: 1; }
.video-controls-overlay * { pointer-events: auto; }

/* Big play */
.big-play-btn {
    position: absolute; top: 50%; left: 50%; translate: -50% -50%;
    width: 80px; height: 80px; border-radius: 50%;
    background: var(--clr-blue);
    display: flex; align-items: center; justify-content: center;
    z-index: 15; transition: all var(--tr-mid);
}
.big-play-btn:hover { scale: 1.1; box-shadow: var(--shadow-xl); }
.big-play-btn.hidden { opacity: 0; pointer-events: none; }

/* Top bar */
.controls-top { display: flex; justify-content: space-between; align-items: flex-start; }
.video-title-overlay h1 {
    font-size: 1.45rem;
    color: #fff;
    text-shadow: 0 2px 4px #000;
}

/* Quality selector */
.quality-selector { position: relative; }
.quality-btn {
    display: flex; align-items: center; gap: var(--space-1);
    background: rgba(0, 0, 0, 0.7); color: #fff;
    padding: var(--space-1) var(--space-2); border-radius: var(--radius-2);
}
.quality-btn:hover { background: var(--clr-blue); }
.quality-menu {
    position: absolute; top: calc(100% + var(--space-1)); right: 0; z-index: 25;
    background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px);
    border-radius: var(--radius-2); padding: var(--space-1); min-width: 120px;
}
.quality-option {
    padding: var(--space-1) var(--space-2);
    color: #fff;
    border-radius: var(--radius-1);
}
.quality-option:hover,
.quality-option.active { background: var(--clr-blue); }

/* Bottom bar */
.controls-bottom { display: flex; flex-direction: column; gap: var(--space-2); }

/* Progress */
.progress-container {
    width: 100%; height: 6px; cursor: pointer; position: relative;
}
.progress-bar {
    width: 100%; height: 100%; background: rgba(255, 255, 255, 0.35);
    border-radius: 3px; overflow: hidden;
}
.progress-filled { height: 100%; background: var(--clr-blue); width: 0; }
.progress-buffer  {
    position: absolute; top: 0; left: 0; height: 100%;
    background: rgba(255, 255, 255, 0.55); width: 0;
}
.progress-thumb {
    position: absolute; top: 50%; translate: 0 -50%;
    width: 12px; height: 12px; border-radius: 50%;
    background: var(--clr-blue);
    opacity: 0; transition: opacity var(--tr-fast);
}
.progress-container:hover .progress-thumb { opacity: 1; }

/* Row with buttons + time display */
.controls-row { display: flex; justify-content: space-between; align-items: center; gap: var(--space-4); }
.controls-left,
.controls-right { display: flex; align-items: center; gap: var(--space-3); }
.control-btn {
    padding: var(--space-1);
    color: #fff;
    border-radius: var(--radius-1);
}
.control-btn:hover { background: rgba(255, 255, 255, 0.25); }

/* Volume */
.volume-container { display: flex; align-items: center; gap: var(--space-1); }
.volume-slider {
    width: 90px; height: 4px; cursor: pointer;
    opacity: 0; scale: 0 1;
    transform-origin: left;
    transition: all var(--tr-fast);
}
.volume-container:hover .volume-slider { opacity: 1; scale: 1 1; }
.volume-bar {
    width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.35); border-radius: 2px; position: relative;
}
.volume-filled { height: 100%; background: var(--clr-blue); width: 0; }
.volume-thumb {
    position: absolute; top: 50%; translate: 0 -50%;
    width: 8px; height: 8px; border-radius: 50%; background: var(--clr-blue);
}

/* Time display */
.time-display {
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.9rem; color: #fff;
}

/* Speed menu */
.speed-menu {
    position: absolute;
    bottom: calc(100% + var(--space-1)); right: 80px; z-index: 25;
    background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px);
    border-radius: var(--radius-2); padding: var(--space-1);
}
.speed-option {
    padding: var(--space-1) var(--space-2);
    color: #fff; border-radius: var(--radius-1); text-align: center;
}
.speed-option:hover,
.speed-option.active { background: var(--clr-blue); }

/* 7) Info panel */
.video-info-section { margin-top: var(--space-6); }
.video-details {
    background: var(--clr-dark); border-radius: var(--radius-3);
    padding: var(--space-5); border: 1px solid var(--clr-dark-2);
}
.video-meta {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: var(--space-4); padding-bottom: var(--space-4);
    border-bottom: 1px solid var(--clr-dark-2);
}
.video-stats { display: flex; gap: var(--space-3); color: var(--clr-gray); font-size: 0.95rem; }
.video-rating { display: flex; gap: var(--space-2); }
.rating-stars .star { color: var(--clr-gold); font-size: 1.2rem; }
.video-description h2 {
    color: var(--clr-blue); margin-bottom: var(--space-3);
}
.video-description p {
    color: var(--clr-silver); line-height: 1.6;
    margin-bottom: var(--space-4);
}

/* Tags */
.video-tags { display: flex; flex-wrap: wrap; gap: var(--space-2); }
.video-tag {
    padding: var(--space-1) var(--space-2);
    font-size: 0.8rem; font-weight: 500;
    background: var(--clr-blue-20); color: var(--clr-blue);
    border: 1px solid var(--clr-blue); border-radius: var(--radius-3);
}
.video-tag:hover { background: var(--clr-blue); color: #fff; }

/* 8) Sidebar (related videos) */
.related-videos-sidebar {
    background: var(--clr-dark); border-radius: var(--radius-3);
    padding: var(--space-4); border: 1px solid var(--clr-dark-2);
    height: max-content; position: sticky; top: 96px;
}
.sidebar-title {
    color: var(--clr-blue); font-weight: 700; margin-bottom: var(--space-4);
}
.related-videos-list { display: flex; flex-direction: column; gap: var(--space-3); }
.related-video-card {
    display: flex; gap: var(--space-2); padding: var(--space-2);
    border-radius: var(--radius-2);
}
.related-video-card:hover { background: var(--clr-blue-10); }
.related-thumbnail {
    position: relative; width: 120px; aspect-ratio: 16 / 9; flex-shrink: 0;
    background: var(--clr-dark-2); border-radius: var(--radius-1); overflow: hidden;
}
.related-duration {
    position: absolute; bottom: 4px; right: 4px;
    background: rgba(0, 0, 0, 0.75);
    color: #fff; font-size: 0.7rem; padding: 2px 4px; border-radius: 2px;
}
.related-info {
    flex: 1; display: flex; flex-direction: column; gap: var(--space-1);
}
.related-title {
    color: var(--clr-silver); font-size: 0.9rem; font-weight: 500; line-height: 1.3;
    overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
}
.related-views { color: var(--clr-gray); font-size: 0.8rem; }

/* 9) Theater + fullscreen tweaks */
.theater-mode .xshiver-player {
    position: fixed; inset: 0; border-radius: 0; aspect-ratio: auto; z-index: 9999;
}
.xshiver-player:fullscreen,
.xshiver-player:-webkit-full-screen {
    width: 100vw; height: 100vh; border-radius: 0;
}

/* 10) Share modal (simple) */
.share-options {
    display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-4);
}
.share-btn {
    display: flex; flex-direction: column; align-items: center; gap: var(--space-1);
    padding: var(--space-4);
    background: var(--clr-dark-2); border-radius: var(--radius-3);
    color: var(--clr-silver);
}
.share-btn:hover { background: var(--clr-blue); color: #fff; }
.share-icon { font-size: 2rem; }
.share-link input {
    width: 100%; padding: var(--space-2); border-radius: var(--radius-2);
    background: var(--clr-dark-2); border: 1px solid var(--clr-gray); color: var(--clr-silver);
}

/* 11) Break-points
   –––––––––––––––––––––––––––––––––––––––––––––––––––––– */

/* ↳ Tablet 768–1279 px */
@media (max-width: 1279px) {
    .video-main {
        grid-template-columns: 1fr; gap: var(--space-5);
        padding: calc(var(--space-5) + 56px) var(--space-4);
    }
    .related-videos-sidebar { position: static; margin-top: var(--space-5); }
}

/* ↳ Phone ≤767 px */
@media (max-width: 767px) {
    .video-header { height: 48px; padding: 0 var(--space-2); }
    .big-play-btn { width: 64px; height: 64px; }

    .controls-bottom { gap: var(--space-1); }
    .controls-row { flex-wrap: wrap; gap: var(--space-2); }
    .time-display { font-size: 0.8rem; min-width: 70px; }
    .volume-slider { width: 70px; }

    .video-info-section { margin-top: var(--space-5); }
    .video-details { padding: var(--space-4); }
    .video-description h2 { font-size: 1.1rem; }
    .sidebar-title { font-size: 1rem; }
    .related-thumbnail { width: 96px; }
    .share-options { grid-template-columns: 1fr; }
    .quality-btn,
    .speed-btn { font-size: 0.8rem; padding: var(--space-1) var(--space-1); }
    .quality-menu,
    .speed-menu { min-width: 100px; }
}

/* Touch optimisations */
@media (hover: none) and (pointer: coarse) {
    .video-controls-overlay { opacity: 1; }          /* always visible */
    .progress-thumb,
    .volume-thumb { opacity: 1; width: 16px; height: 16px; }
    .control-btn { min-width: 44px; min-height: 44px; }
    .big-play-btn { width: 88px; height: 88px; }
}
